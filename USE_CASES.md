# 사용자 유스케이스 및 API 엔드포인트 매핑

## 🔐 인증 관리

### UC001: 사용자 회원가입

**목적**: 새로운 사용자가 시스템에 계정을 생성할 수 있습니다.

- **API**: `POST /api/auth/register`
- **입력**: 사용자 정보 (이메일, 비밀번호, 대학 정보 등)
- **출력**: 생성된 사용자 정보

### UC002: 사용자 로그인

**목적**: 등록된 사용자가 시스템에 로그인하여 인증 토큰을 받습니다.

- **API**: `POST /api/auth/login`
- **입력**: 로그인 정보 (이메일, 비밀번호)
- **출력**: 사용자 정보 및 JWT 액세스 토큰

### UC003: 사용자 프로필 조회

**목적**: 인증된 사용자가 자신의 프로필 정보를 확인할 수 있습니다.

- **API**: `GET /api/users/profile`
- **입력**: JWT 토큰 (헤더)
- **출력**: 사용자 프로필 정보

## 🎓 입학 관리 (모집 시즌)

### UC004: 모집 시즌 생성

**목적**: 새로운 입학 모집 시즌을 생성하여 전형 유형과 모집 단위를 설정합니다.

- **API**: `POST /api/admissions/seasons`
- **입력**: 대학 코드, 입학 연도, 전형 유형 목록, 모집 단위 목록
- **출력**: 생성된 모집 시즌 정보

### UC005: 모집 시즌 목록 조회

**목적**: 등록된 모집 시즌들을 조회하여 관리할 수 있습니다.

- **API**: `GET /api/admissions/seasons`
- **입력**: 대학 코드 (선택적)
- **출력**: 모집 시즌 목록

### UC006: 특정 모집 시즌 조회

**목적**: ID로 특정 모집 시즌의 상세 정보를 확인할 수 있습니다.

- **API**: `GET /api/admissions/seasons/{id}`
- **입력**: 모집 시즌 ID
- **출력**: 해당 모집 시즌의 상세 정보

### UC007: 모집 시즌 수정

**목적**: 기존 모집 시즌의 정보를 수정하여 변경사항을 반영할 수 있습니다.

- **API**: `PUT /api/admissions/seasons/{id}`
- **입력**: 모집 시즌 ID, 수정할 정보
- **출력**: 수정된 모집 시즌 정보

### UC008: 모집 시즌 삭제

**목적**: 불필요한 모집 시즌을 삭제하여 시스템을 정리할 수 있습니다.

- **API**: `DELETE /api/admissions/seasons/{id}`
- **입력**: 모집 시즌 ID
- **출력**: 삭제 성공 메시지

## 📄 파일 업로드 및 데이터 처리

### UC009: 학생 데이터 파일 업로드

**목적**: SQLite 데이터베이스 파일을 업로드하여 학생 데이터를 시스템에 가져올 수 있습니다.

- **API**: `POST /api/file-upload/upload`
- **입력**: SQLite 파일 (.db3/.db), 모집 시즌 ID, 파일명
- **출력**: 업로드 세션 ID 및 시작 메시지

### UC010: 업로드 진행상황 모니터링

**목적**: 파일 업로드 및 데이터 마이그레이션 진행상황을 실시간으로 확인할 수 있습니다.

- **API**: `GET /api/file-upload/progress` (SSE)
- **입력**: JWT 토큰
- **출력**: 실시간 진행상황 스트림

### UC011: 업로드 요약 정보 조회

**목적**: 특정 모집 시즌의 업로드된 데이터 요약 정보를 확인할 수 있습니다.

- **API**: `GET /api/file-upload/summary`
- **입력**: 모집 시즌 ID
- **출력**: 총 학생 수, 과목 성적 수, 업로드 날짜 등

### UC012: 과목 그룹 매핑 파일 업로드

**목적**: Excel 파일을 업로드하여 과목과 그룹 간의 매핑 정보를 설정할 수 있습니다.

- **API**: `POST /api/subject-group-mapping/upload`
- **입력**: Excel 파일, 모집 시즌 ID
- **출력**: 업로드된 행 수

### UC013: 과목 그룹 매핑 요약 조회

**목적**: 업로드된 과목 그룹 매핑의 요약 정보를 확인할 수 있습니다.

- **API**: `GET /api/subject-group-mapping/summary`
- **입력**: 모집 시즌 ID
- **출력**: 매핑 요약 정보

### UC014: 과목 그룹 매핑 상세 조회

**목적**: 업로드된 과목 그룹 매핑의 상세 내용을 확인할 수 있습니다.

- **API**: `GET /api/subject-group-mapping/details`
- **입력**: 모집 시즌 ID
- **출력**: 매핑 상세 목록

## 📊 성적 계산 및 분석

### UC015: 성적 계산 실행

**목적**: 업로드된 학생 데이터를 바탕으로 성적 계산 및 순위 산정을 시작할 수 있습니다.

- **API**: `POST /api/score-calculation`
- **입력**: 모집 시즌 ID
- **출력**: 계산 시작 상태 메시지

### UC016: 성적 계산 요약 정보 조회

**목적**: 특정 모집 시즌의 성적 계산 결과 요약을 확인할 수 있습니다.

- **API**: `GET /api/score-calculation/summary`
- **입력**: 모집 시즌 ID
- **출력**: 계산 요약 통계

### UC017: 학생 성적 목록 조회

**목적**: 계산된 성적을 가진 학생들의 목록을 페이지네이션으로 조회할 수 있습니다.

- **API**: `GET /api/score-calculation/student`
- **입력**: 모집 시즌 ID, 페이지 번호, 페이지 크기, 검색어 (선택적)
- **출력**: 학생 성적 목록 (페이지네이션)

### UC018: 학생 성적 상세 조회

**목적**: 특정 학생의 상세한 성적 계산 정보를 확인할 수 있습니다.

- **API**: `GET /api/score-calculation/student/detail`
- **입력**: 모집 시즌 ID, 학생 식별번호
- **출력**: 학생의 상세 성적 계산 결과

### UC019: 성적 결과 Excel 내보내기

**목적**: 계산된 성적 결과를 Excel 파일로 다운로드하여 외부에서 활용할 수 있습니다.

- **API**: `GET /api/score-calculation/export`
- **입력**: 모집 시즌 ID
- **출력**: Excel 파일 (바이너리)

## 📡 실시간 이벤트

### UC020: 실시간 이벤트 구독

**목적**: 시스템에서 발생하는 실시간 이벤트를 구독하여 진행상황을 모니터링할 수 있습니다.

- **API**: `GET /api/events` (SSE)
- **입력**: JWT 토큰
- **출력**: 실시간 이벤트 스트림

---

## 📋 사용 시나리오 예시

### 시나리오 1: 새 학기 모집 준비

1. **로그인** (UC002) → JWT 토큰 획득
2. **모집 시즌 생성** (UC004) → 새 학기 전형 설정
3. **학생 데이터 업로드** (UC009) → SQLite 파일 업로드
4. **업로드 진행상황 모니터링** (UC010) → 실시간 확인
5. **업로드 요약 확인** (UC011) → 데이터 검증

### 시나리오 2: 성적 계산 및 분석

1. **과목 그룹 매핑 업로드** (UC012) → 성적 계산 기준 설정
2. **성적 계산 실행** (UC015) → 자동 계산 시작
3. **계산 요약 확인** (UC016) → 전체 통계 검토
4. **학생 성적 목록 조회** (UC017) → 결과 확인
5. **Excel 내보내기** (UC019) → 결과물 다운로드

### 시나리오 3: 학생별 상세 분석

1. **학생 성적 목록 조회** (UC017) → 전체 목록에서 검색
2. **학생 성적 상세 조회** (UC018) → 개별 학생 분석
3. **프로필 확인** (UC003) → 작업자 정보 검증

---

## 🔒 보안 및 인증

- 대부분의 API는 JWT Bearer 토큰 인증이 필요합니다
- 파일 업로드는 5GB 제한이 있습니다
- 실시간 이벤트는 사용자별로 격리되어 제공됩니다
- 모든 API는 `/api` 경로를 기본으로 사용합니다
